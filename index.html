<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Docker URL Converter</title>
  <style>
    body { font-family: sans-serif; max-width: 800px; margin: 2em auto; }
    input, pre { width: 100%; padding: 0.5em; margin-top: 1em; font-size: 1em; }
    pre { background: #f0f0f0; white-space: pre-wrap; }
    label { font-weight: bold; margin-top: 1em; display: block; }
  </style>
</head>
<body>
  <h2>GCR to Artifact Registry URL Converter</h2>
  <label for="input">Paste old GCR URL:</label>
  <input type="text" id="input" value="gcr.io/securitydam-sdcc/sdcc-services/feature/csp-184/services/system@sha256:576b74420c9868e99fa8d09338ff5c71b16f38c4994d62adeda858b31253839a" />
  <label for="output">Converted Artifact Registry URL:</label>
  <pre id="output"></pre>

  <script>
    const input = document.getElementById('input');
    const output = document.getElementById('output');

    function convert(value) {
      const regex = /^gcr\.io\/securitydam-sdcc\/sdcc-services\/([^\/]+)\/(services)\/([^@]+)(@sha256:[a-fA-F0-9]{64})?$/;
      const trimmed = value.trim();

      const match = trimmed.match(regex);
      if (match) {
        const branch = match[1];
        const type = match[2];
        const name = match[3];
        const digest = match[4] || '';

        return `us-docker.pkg.dev/securitydam-sdcc/gcr.io/sdcc-services/${branch}/${type}/${name}${digest}`;
      } else {
        return 'Invalid GCR image format or not matching expected pattern.';
      }
    }

    function updateOutput() {
      output.textContent = convert(input.value);
    }

    input.addEventListener('input', updateOutput);
    updateOutput(); // run once on load
  </script>
</body>
</html>
