<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Docker Image URL Converter</title>
  <style>
    body { font-family: sans-serif; max-width: 800px; margin: 2em auto; }
    input, pre { width: 100%; padding: 0.5em; margin-top: 1em; }
    pre { background: #f0f0f0; white-space: pre-wrap; }
  </style>
</head>
<body>
  <h2>GCR to Artifact Registry URL Converter</h2>
  <label for="input">Paste old GCR URL:</label>
  <input type="text" id="input" placeholder="gcr.io/..." />
  <label for="output">Converted Artifact Registry URL:</label>
  <pre id="output"></pre>

  <script>
    const input = document.getElementById('input');
    const output = document.getElementById('output');

    input.addEventListener('input', () => {
      const value = input.value.trim();
      const regex = /^gcr\.io\/securitydam-sdcc\/sdcc-services\/([^\/]+)\/(services)\/([^@]+)(@sha256:[a-f0-9]{64})$/;
      const match = value.match(regex);

      if (match) {
        const branch = match[1];
        const type = match[2];
        const name = match[3];
        const digest = match[4];

        const converted = `us-docker.pkg.dev/securitydam-sdcc/gcr.io/sdcc-services/${branch}/${type}/${name}${digest}`;
        output.textContent = converted;
      } else {
        output.textContent = 'Invalid GCR image format or not matching expected pattern.';
      }
    });
  </script>
</body>
</html>
